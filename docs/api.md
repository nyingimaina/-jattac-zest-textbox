<!-- docs/api.md -->
[‚¨ÖÔ∏è Previous: Features Showcase](./features.md) | [Next: Configuration Guide ‚û°Ô∏è](./configuration.md)

# üìã API Reference

This document provides a comprehensive and exhaustive technical blueprint for `ZestTextbox`, detailing all public-facing properties, interfaces, and types. It serves as a dense reference and is best utilized when linked to from [The Cookbook](./examples.md) or [Features Showcase](./features.md) for specific technical inquiries.

---

## Table of Contents
<!-- TOC auto-generated by Gemini CLI, please do not edit -->
<!-- TOC END -->

---

## ZestTextbox Component Props

The `ZestTextbox` component accepts all standard [HTML `<input>` attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attributes) and [HTML `<textarea>` attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea#attributes), depending on whether `isMultiline` is `true`. In addition, it introduces several custom props for enhanced functionality.

### Custom Props

| Prop          | Type                  | Default     | Description                                                                                                                                                                                                                                                                                                                                                         |
|---------------|-----------------------|-------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `zest`        | `ZestProps<T>`        | `undefined` | An object containing all custom configurations and behaviors specific to the `ZestTextbox` component. This prop encapsulates all non-native HTML input/textarea props for better discoverability and developer experience. The generic type `T` represents the parsed value type. See the `ZestProps` interface for details below.                             |
| `className`   | `string`              | `""`        | A custom CSS class to apply to the main textbox element.                                                                                                                                                                                                                                                                                                        |
| `maxLength`   | `number`              | `undefined` | The maximum number of characters allowed in the input. Setting this prop enables the character counter and can activate the progress bar and animated counter features via the `zest` prop.                                                                                                                                                                     |
| `type`        | `HtmlInputType`       | `'text'`    | The type of the input element. Supports all standard HTML input types (e.g., `"text"`, `"email"`, `"password"`, `"number"`, etc.) plus custom semantic types `"currency"` and `"percentage"`. Special handling is applied for `"password"` (enables visibility toggle), and `"number"`, `"currency"`, `"percentage"` (enables intelligent filtering and default numeric parsing/validation). See `HtmlInputType` for all available options. |
| `onChange`    | `(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void` | `undefined` | Standard React `onChange` event handler. Note that `ZestTextbox` also provides a type-safe `onTextChanged` callback within `ZestProps` for handling parsed and validated values. If both `onChange` and `zest.onTextChanged` are provided, both will be triggered.                                                                                                                                                                                               |
| `value`       | `string`              | `""`        | Controls the input's value. Should be used with `onChange` for controlled components.                                                                                                                                                                                                                                                                         |
| `defaultValue`| `string`              | `""`        | Sets the initial value of the input. Use for uncontrolled components.                                                                                                                                                                                                                                                                                           |
| `placeholder` | `string`              | `""`        | Provides a hint to the user about what kind of information is expected in the field.                                                                                                                                                                                                                                                                            |
| `rows`        | `number`              | `undefined` | Specifies the visible height of a `<textarea>` in terms of lines. Only applicable when `zest.isMultiline` is `true`.                                                                                                                                                                                                                                             |
| `disabled`    | `boolean`             | `false`     | If `true`, the input field will be disabled and non-interactive.                                                                                                                                                                                                                                                                                                |
| `readOnly`    | `boolean`             | `false`     | If `true`, the input field will be read-only. The user can select but not modify the text.                                                                                                                                                                                                                                                                      |
| `name`        | `string`              | `undefined` | The name of the input field, used when submitting forms.                                                                                                                                                                                                                                                                                                        |
| `id`          | `string`              | `undefined` | A unique identifier for the input field.                                                                                                                                                                                                                                                                                                                        |
| `autoComplete`| `string`              | `undefined` | Indicates whether the value of the control can be automatically completed by the browser.                                                                                                                                                                                                                                                                       |
| `autoFocus`   | `boolean`             | `false`     | If `true`, the input field will automatically receive focus when the page loads.                                                                                                                                                                                                                                                                                |

---

## Interfaces and Types

### `ZestProps<T = string>`

The `ZestProps` interface defines the custom enhancements and behaviors configurable for `ZestTextbox`. Its properties can accept primitive values, functions that receive the input's `type` for type-aware logic, or asynchronous versions of those functions (`ZestConfigValue<T>`). This is especially powerful for dynamic, app-wide settings with [Centralized Configuration](./configuration.md).

The generic type `T` represents the expected *parsed* value type of the input, which is particularly relevant for `onTextChanged`, `parser`, and `validator` props.

```typescript
interface ZestProps<T = string> {
  helperTextConfig?: ZestConfigValue<HelperTextConfig>;
  onTextChanged?: (value: T | undefined) => void;
  zSize?: ZestConfigValue<ZestTextboxSize>;
  stretch?: ZestConfigValue<boolean>;
  showProgressBar?: ZestConfigValue<boolean>;
  animatedCounter?: ZestConfigValue<boolean>;
  theme?: ZestConfigValue<"light" | "dark" | "system">;
  isMultiline?: ZestConfigValue<boolean>;
  parser?: ZestConfigValue<InputParser<T>>;
  validator?: ZestConfigValue<InputValidator<T>>;
  helperTextPositioning?: ZestConfigValue<"reserved" | "absolute">;
}
```

| Property                 | Type (`ZestConfigValue<DesiredType>`)                         | Default      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|--------------------------|-----------------------------------------------------------------|--------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `helperTextConfig`       | `ZestConfigValue<HelperTextConfig>`                             | `undefined`  | **Use Case:** Display dynamic instructions, formatted values, or validation messages below the input. The `templater` function within `HelperTextConfig` receives a `context` object where `inputType` is accessible via `context.props.type`. If the `templater` returns `null`, `undefined`, or an empty string (`""`), the helper text will not be rendered. This property accepts a static `HelperTextConfig` object, a function that returns `HelperTextConfig` (optionally based on `inputType`), or an async function returning a `Promise<HelperTextConfig>`.                                                                                                                                               |
| `onTextChanged`          | `(value: T | undefined) => void`                                | `undefined`  | **Use Case:** A type-safe way to get the *parsed and validated* value from the component whenever it changes, without needing to manually handle `event.target.value` and parse/validate it yourself. The type `T` is determined by the `parser` used.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `zSize`                  | `ZestConfigValue<ZestTextboxSize>`                              | `'md'`       | **Use Case:** Control the visual size of the textbox (`"sm"`, `"md"`, `"lg"`), affecting padding and font size. Accepts a static size value, a function that returns a size based on `inputType`, or an async function returning a `Promise` of a size.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `stretch`                | `ZestConfigValue<boolean>`                                      | `false`      | **Use Case:** Make the textbox fill the entire width of its container, useful for forms and page layouts. Accepts a static boolean, a function that returns a boolean based on `inputType`, or an async function returning a `Promise` of a boolean.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `showProgressBar`        | `ZestConfigValue<boolean>`                                      | `false`      | **Use Case:** Provide a clear visual indicator of how close the user is to the `maxLength`. Requires `maxLength` to be set on the `ZestTextbox` component. Accepts a static boolean, a function that returns a boolean based on `inputType`, or an async function returning a `Promise` of a boolean.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `animatedCounter`        | `ZestConfigValue<boolean>`                                      | `false`      | **Use Case:** Draw the user's attention to the character counter as they approach the `maxLength` by changing its color. Requires `maxLength` to be set on the `ZestTextbox` component. Accepts a static boolean, a function that returns a boolean based on `inputType`, or an async function returning a `Promise` of a boolean.                                                                                                                                                                                                                                                                                                                                                                                     |
| `theme`                  | `ZestConfigValue<"light" \| "dark" \| "system">`                | `'system'`   | **Use Case:** Force the component to a specific color scheme, or let it automatically adapt to the user's system preference. Accepts a static theme value (`"light"`, `"dark"`, or `"system"`), a function that returns a theme based on `inputType`, or an async function returning a `Promise` of a theme.                                                                                                                                                                                                                                                                                                                                                                                                      |
| `isMultiline`            | `ZestConfigValue<boolean>`                                      | `false`      | **Use Case:** Renders the component as an HTML `<textarea>` instead of an `<input>` for multi-line text input. Accepts a static boolean, a function that returns a boolean based on `inputType`, or an async function returning a `Promise` of a boolean.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `parser`                 | `ZestConfigValue<InputParser<T>>`                               | `undefined`  | **Use Case:** A function to transform the raw string `value` into a desired type `T` (e.g., `string` to `number`, `string` to `Date`). Returns `undefined` if parsing fails. Default parsers are automatically provided for `type="number"`, `"currency"`, and `"percentage"` if no custom parser is supplied. Accepts a static `InputParser` function, a function that returns an `InputParser` based on `inputType`, or an async function returning a `Promise` of an `InputParser`.                                                                                                                                                                                                                 |
| `validator`              | `ZestConfigValue<InputValidator<T>>`                            | `undefined`  | **Use Case:** A function to perform custom validation logic on the *parsed* value of type `T` (e.g., checking for a minimum value, a specific pattern). Returns `true` for valid input, or a `string` containing an error message for invalid input. Default validators are automatically provided for `type="number"`, `"currency"`, and `"percentage"` if no custom validator is supplied. Accepts a static `InputValidator` function, a function that returns an `InputValidator` based on `inputType`, or an async function returning a `Promise` of an `InputValidator`.                                                                                                                                               |
| `helperTextPositioning`  | `ZestConfigValue<"reserved" \| "absolute">`                     | `'absolute'` | **Use Case:** Controls how helper text influences the document flow. <br/> - `'reserved'`: Always reserves space for the helper text, preventing layout shifts when helper text appears or disappears. (Recommended for stable layouts). <br/> - `'absolute'`: Positions the helper text absolutely, allowing it to "float" without affecting the surrounding layout. Can cause overlap if not managed carefully by the consumer. Accepts a static value (`"reserved"` or `"absolute"`), a function that returns a position based on `inputType`, or an async function returning a `Promise` of a position.                                                                                                           |

---

### `HtmlInputType`

A union type extending standard HTML input types with semantic additions for enhanced behavior in `ZestTextbox`.

```typescript
type HtmlInputType =
  | "text"
  | "email"
  | "password"
  | "number"
  | "tel"
  | "url"
  | "search"
  | "color"
  | "date"
  | "datetime-local"
  | "month"
  | "time"
  | "week"
  | "currency"    // Custom semantic type: enables intelligent numeric filtering and default currency parser/validator.
  | "percentage";  // Custom semantic type: enables intelligent numeric filtering and default percentage parser/validator.
```

---

### `ZestTextboxSize`

Defines the discrete size options for the `ZestTextbox` component.

```typescript
type ZestTextboxSize = "sm" | "md" | "lg";
```

---

### `ZestConfigValue<T>`

A utility type that allows `ZestProps` properties to be defined as a static value, a function (potentially context-aware), or an asynchronous function (for deferred resolution). This enables powerful [Centralized Configuration](./configuration.md) scenarios.

```typescript
type ZestConfigValue<T> = T | ((inputType?: HtmlInputType) => T) | ((inputType?: HtmlInputType) => Promise<T>);
```

*   `T`: The direct value of the property (e.g., `true`, `"sm"`).
*   `((inputType?: HtmlInputType) => T)`: A function that receives the `HtmlInputType` of the `ZestTextbox` and returns the value. Useful for type-specific configurations.
*   `((inputType?: HtmlInputType) => Promise<T>)`: An asynchronous function that receives the `HtmlInputType` and returns a `Promise` that resolves to the value. Allows for configurations that require async operations (e.g., fetching from a remote source).

---

### `InputParser<T>`

Defines the signature for custom parser functions, used to transform the raw string input into a specific data type `T`.

```typescript
type InputParser<T> = (value: string, inputType?: HtmlInputType) => T | undefined;
```

*   `value`: The raw string value from the input field.
*   `inputType`: The `HtmlInputType` of the `ZestTextbox`.
*   **Returns:** The parsed value of type `T`, or `undefined` if parsing fails.

---

### `InputValidator<T>`

Defines the signature for custom validator functions, used to check the validity of the *parsed* input value.

```typescript
type InputValidator<T> = (value: T | undefined, inputType?: HtmlInputType) => boolean | string;
```

*   `value`: The parsed value of type `T` (or `undefined` if parsing failed).
*   `inputType`: The `HtmlInputType` of the `ZestTextbox`.
*   **Returns:** `true` if the value is valid, or a `string` containing an error message if the value is invalid.

---

### `HelperTextConfig`

Configures the behavior and content of the helper text displayed below the `ZestTextbox`.

```typescript
interface HelperTextConfig {
  formatter?: (context: ZestContext<any>) => string;
  templater?: (formattedValue: string, context: ZestContext<any>) => React.ReactNode;
  className?: string;
}
```

*   `formatter?: (context: ZestContext<any>) => string`: An optional function to process the input's data (raw value, parsed value, props) into a formatted string. This string is then passed to the `templater`. Ideal for operations like currency formatting.
*   `templater?: (formattedValue: string, context: ZestContext<any>) => React.ReactNode`: An optional function for advanced rendering of the helper text. It receives the output of the `formatter` (or the raw value if no formatter) and a rich `ZestContext` object. It should return a `ReactNode` to be rendered.
*   `className?: string`: An optional CSS class to apply to the helper text container.

---

### `ZestContext<T = string>`

A rich context object provided to `formatter` and `templater` functions within `HelperTextConfig`, as well as to `InputParser` and `InputValidator` functions when they are resolved from `ZestConfigValue`. It provides comprehensive information about the current state of the input.

```typescript
interface ZestContext<T = string> {
  value: string;
  parsedValue?: T;
  props: ZestTextboxProps<T>;
}
```

*   `value: string`: The current raw string value from the textbox.
*   `parsedValue?: T`: The result of the active `parser` function, or `undefined` if parsing failed or no parser is active. `T` is the generic type passed to `ZestTextboxProps`.
*   `props: ZestTextboxProps<T>`: The full set of resolved props (including both standard HTML and `ZestProps`) currently applied to the `ZestTextbox` instance.

---

[‚¨ÖÔ∏è Previous: Features Showcase](./features.md) | [Next: Configuration Guide ‚û°Ô∏è](./configuration.md)
